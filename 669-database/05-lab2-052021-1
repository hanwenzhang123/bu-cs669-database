Section One – Relating Data

Step 1 – Creating the Table Structure

ending fk is for foreign key
CONSTRAINT is for making the name of the foreign key
order matters in the reference
constraint must be valid all the time

CREATE TABLE Restaurant (
restaurant_id DECIMAL(12) PRIMARY KEY,
name VARCHAR(64) NOT NULL
);

CREATE TABLE Meal (
meal_nr DECIMAL(12) NOT NULL,
description VARCHAR(255) NOT NULL,
date_served DATE NOT NULL,
restaurant_id DECIMAL(12)
);

ALTER TABLE Meal        //An ALTER TABLE command lets us modify all aspects of the structure of a table. 
ADD CONSTRAINT meal_pk      //ADD CONSTRAINT  is the identifier that names our constraint.
PRIMARY KEY(meal_nr);

ALTER TABLE Meal
ADD CONSTRAINT meal_restaurant_fk
FOREIGN KEY(restaurant_id)    //adding is a foreign key constraint.
REFERENCES Restaurant(restaurant id);  //what follows are the table and column identities that the foreign key will reference.



Step 2 – Populating the Tables

INSERT INTO Restaurant (restaurant_id, name)
VALUES (31, 'Sunset Grill');
INSERT INTO Restaurant (restaurant_id, name)
VALUES (32, 'Oceanside Beachview');

INSERT INTO Meal (meal_nr, description, date_served, restaurant_id)
VALUES (101, 'Grilled eggplant with sides', CAST('03-Jul-2012' AS DATE), 31); 
INSERT INTO Meal (meal_nr, description, date_served, restaurant_id) 
VALUES(102, 'Delicious pizza with salad', CAST('09-Jul-2012' AS DATE), 31); 
INSERT INTO Meal (meal_nr, description, date_served, restaurant_id) 
VALUES(103, 'Five-course luxurious meal', CAST('13-Jul-2012' AS DATE), NULL);




Step 3 – Invalid Reference Attempt

INSERT INTO Meal (meal_nr, description, date_served, restaurant_id)
VALUES(104, 'Juicy entree and french fries', CAST('17-Jul-2012' AS DATE), 57);

make sure everything has exist in the table, parent must exist


Step 4 – Listing Pizzas and Toppings

SELECT description, date_served, name
FROM Meal
JOIN Restaurant ON Meal.restaurant_id = Restaurant.restaurant_id;   //on is boolean


//List the name of all restaurants, ordered alphabetically. If the restaurant served any meals, list the description and date served of each meal.
//ORDER BY
SELECT description, date_served, name
FROM Meal
RIGHT JOIN Restaurant ON Meal.restaurant_id = Restaurant.restaurant_id
ORDER BY name;


//a full outer join is a combination of left and right joins.
//FULL JOIN
SELECT description, date_served, name
FROM Meal
FULL JOIN Restaurant ON Meal.restaurant_id = Restaurant.restaurant_id
ORDER BY description DESC;

LEFT - first
RIGHT - second


Step 5 – Listing All Pizzas
Step 6 – Listing All Toppings
Step 7 – Listing All Pizzas and All Toppings

